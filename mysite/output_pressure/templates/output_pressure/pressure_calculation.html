<form method="post"
      id="outputPressureForm"
      data-materials-url="{% url 'ajax_load_materials' %}"
      data-groups-url="{% url 'ajax_load_groups' %}"
      data-temperatures-pressures-url="{% url 'ajax_load_temperatures_pressures' %}"
      novalidate>
    {% csrf_token %}
    <table>
        {{ form.as_table }}
    </table>
</form>

<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script>

    function updateCalculatedValue() {
        var groupSelect = document.getElementById("id_group");
        var group_value = groupSelect.options[groupSelect.selectedIndex].text;

        var materialSelect = document.getElementById("id_material");
        var material_value = materialSelect.options[materialSelect.selectedIndex].text;

        document.getElementById("id_calculated_value").setAttribute('value', group_value + '  --  ' + material_value);
    }

    $("#id_group").change(function () {
      var url = $("#outputPressureForm").attr("data-materials-url");
      var groupId = $(this).val();

      $.ajax({
        url: url,
        data: {
          'group': groupId
        },
        success: function (data) {
          $("#id_material").html(data);

          updateCalculatedValue();
        }
      });

    });

    $("#id_material").change(function () {
      var url = $("#outputPressureForm").attr("data-groups-url");
      var materialId = $(this).val();

      $.ajax({
        url: url,
        data: {
          'material': materialId
        },
        success: function (data) {
          $("#id_group").html(data);

          updateCalculatedValue();
        }
      });
    });
      
    $("#id_material_class").change(function () {
      var url = $("#outputPressureForm").attr("data-temperatures-pressures-url");
      var materialClassId = $(this).val();
      var groupId = $(document.getElementById("id_group")).val();

      document.getElementById("id_minimum_temperature").setAttribute('value',materialClassId);
      document.getElementById("id_maximum_temperature").setAttribute('value',groupId);

      $.ajax({
        url: url,
        data: {
          'material_class': materialClassId,
          'group': groupId
        },
        success: function (data) {
          document.getElementById("id_calculated_value").setAttribute('value',data);
          <!--$("#id_calculated_value").html(data);-->


          <!--updateCalculatedValue();-->
        }
      });
    });






</script>
